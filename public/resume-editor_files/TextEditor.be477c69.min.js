/*! For license information please see TextEditor.be477c69.min.js.LICENSE.txt */
(this.webpackJsonpapp103=this.webpackJsonpapp103||[]).push([[15],{325:function(e,t,n){},666:function(e,t,n){!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=4)}([,,function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return a}));var r=n(3);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=self.EventSource||r.NativeEventSource||r.EventSourcePolyfill,a=function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"createEventSource",(function(){r.eventSource=new i(r.url,r.configuration),r.eventSource.addEventListener("open",(function(e){console.log("New Connection is created")})),r.eventSource.onmessage=function(e){console.log(e.data)}})),o(this,"addEventListener",(function(e,t){r.eventSource.addEventListener(e,t),e in r.listeners||(r.listeners[e]=[]),r.listeners[e].push(t)})),o(this,"removeEventListener",(function(e,t){if(r.eventSource.removeEventListener(e,t),e in r.listeners)for(var n=r.listeners[e],o=0,i=n.length;o<i;o++)if(n[o]===t)return void n.splice(o,1)})),o(this,"closeSSEConnection",(function(e){r.eventSource.close(),console.log(e)})),o(this,"closeConnectionOnlyNotMessagePort",(function(e){r.closeSSEConnection(e)})),this.url=t,this.configuration=n,this.listeners={},this.eventSource=null,this.createEventSource()}},function(e,t,n){var r,o,i;!function(n){"use strict";var a=n.setTimeout,s=n.clearTimeout,c=n.XMLHttpRequest,u=n.XDomainRequest,l=n.EventSource,d=n.document,f=n.Promise,h=n.fetch,p=n.Response,v=n.TextDecoder,g=n.TextEncoder,y=n.AbortController;if(void 0==Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),void 0!=f&&void 0==f.prototype.finally&&(f.prototype.finally=function(e){return this.then((function(t){return f.resolve(e()).then((function(){return t}))}),(function(t){return f.resolve(e()).then((function(){throw t}))}))}),void 0!=h){var m=h;h=function(e,t){return f.resolve(m(e,t))}}function b(){this.bitsNeeded=0,this.codePoint=0}void 0==y&&(y=function(){this.signal=null,this.abort=function(){}}),b.prototype.decode=function(e){function t(e,t,n){if(1===n)return e>=128>>t&&e<<t<=2047;if(2===n)return e>=2048>>t&&e<<t<=55295||e>=57344>>t&&e<<t<=65535;if(3===n)return e>=65536>>t&&e<<t<=1114111;throw new Error}function n(e,t){if(6===e)return t>>6>15?3:t>31?2:1;if(12===e)return t>15?3:2;if(18===e)return 3;throw new Error}for(var r=65533,o="",i=this.bitsNeeded,a=this.codePoint,s=0;s<e.length;s+=1){var c=e[s];0!==i&&(c<128||c>191||!t(a<<6|63&c,i-6,n(i,a)))&&(i=0,a=r,o+=String.fromCharCode(a)),0===i?(c>=0&&c<=127?(i=0,a=c):c>=192&&c<=223?(i=6,a=31&c):c>=224&&c<=239?(i=12,a=15&c):c>=240&&c<=247?(i=18,a=7&c):(i=0,a=r),0===i||t(a,i,n(i,a))||(i=0,a=r)):(i-=6,a=a<<6|63&c),0===i&&(a<=65535?o+=String.fromCharCode(a):(o+=String.fromCharCode(55296+(a-65535-1>>10)),o+=String.fromCharCode(56320+(a-65535-1&1023))))}return this.bitsNeeded=i,this.codePoint=a,o};void 0!=v&&void 0!=g&&function(){try{return"test"===(new v).decode((new g).encode("test"),{stream:!0})}catch(e){console.log(e)}return!1}()||(v=b);var S=function(){};function w(e){this.withCredentials=!1,this.responseType="",this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=S,this.onreadystatechange=S,this._contentType="",this._xhr=e,this._sendTimeout=0,this._abort=S}function _(e){return e.replace(/[A-Z]/g,(function(e){return String.fromCharCode(e.charCodeAt(0)+32)}))}function E(e){for(var t=Object.create(null),n=e.split("\r\n"),r=0;r<n.length;r+=1){var o=n[r].split(": "),i=o.shift(),a=o.join(": ");t[_(i)]=a}this._map=t}function C(){}function j(e){this._headers=e}function T(){}function O(){this._listeners=Object.create(null)}function x(e){a((function(){throw e}),0)}function I(e){this.type=e,this.target=void 0}function N(e,t){I.call(this,e),this.data=t.data,this.lastEventId=t.lastEventId}function A(e,t){I.call(this,e),this.status=t.status,this.statusText=t.statusText,this.headers=t.headers}w.prototype.open=function(e,t){this._abort(!0);var n=this,r=this._xhr,o=1,i=0;this._abort=function(e){0!==n._sendTimeout&&(s(n._sendTimeout),n._sendTimeout=0),1!==o&&2!==o&&3!==o||(o=4,r.onload=S,r.onerror=S,r.onabort=S,r.onprogress=S,r.onreadystatechange=S,r.abort(),0!==i&&(s(i),i=0),e||(n.readyState=4,n.onreadystatechange())),o=0};var u=function(){if(1===o){var e=0,t="",i=void 0;if("contentType"in r)e=200,t="OK",i=r.contentType;else try{e=r.status,t=r.statusText,i=r.getResponseHeader("Content-Type")}catch(a){e=0,t="",i=void 0}0!==e&&(o=2,n.readyState=2,n.status=e,n.statusText=t,n._contentType=i,n.onreadystatechange())}},l=function(){if(u(),2===o||3===o){o=3;var e="";try{e=r.responseText}catch(t){}n.readyState=3,n.responseText=e,n.onprogress()}},d=function(){l(),1!==o&&2!==o&&3!==o||(o=4,0!==i&&(s(i),i=0),n.readyState=4,n.onreadystatechange())},f=function(){i=a((function(){f()}),500),3===r.readyState&&l()};r.onload=d,r.onerror=d,r.onabort=d,"sendAsBinary"in c.prototype||"mozAnon"in c.prototype||(r.onprogress=l),r.onreadystatechange=function(){void 0!=r&&(4===r.readyState?d():3===r.readyState?l():2===r.readyState&&u())},"contentType"in r&&(t+=(-1===t.indexOf("?")?"?":"&")+"padding=true"),r.open(e,t,!0),"readyState"in r&&(i=a((function(){f()}),0))},w.prototype.abort=function(){this._abort(!1)},w.prototype.getResponseHeader=function(e){return this._contentType},w.prototype.setRequestHeader=function(e,t){var n=this._xhr;"setRequestHeader"in n&&n.setRequestHeader(e,t)},w.prototype.getAllResponseHeaders=function(){return void 0!=this._xhr.getAllResponseHeaders?this._xhr.getAllResponseHeaders():""},w.prototype.send=function(){if("ontimeout"in c.prototype||void 0==d||void 0==d.readyState||"complete"===d.readyState){var e=this._xhr;e.withCredentials=this.withCredentials,e.responseType=this.responseType;try{e.send(void 0)}catch(n){throw n}}else{var t=this;t._sendTimeout=a((function(){t._sendTimeout=0,t.send()}),4)}},E.prototype.get=function(e){return this._map[_(e)]},C.prototype.open=function(e,t,n,r,o,i,a){e.open("GET",o);var s=0;for(var c in e.onprogress=function(){var t=e.responseText.slice(s);s+=t.length,n(t)},e.onreadystatechange=function(){if(2===e.readyState){var n=e.status,o=e.statusText,i=e.getResponseHeader("Content-Type"),a=e.getAllResponseHeaders();t(n,o,i,new E(a),(function(){e.abort()}))}else 4===e.readyState&&r()},e.withCredentials=i,e.responseType="text",a)Object.prototype.hasOwnProperty.call(a,c)&&e.setRequestHeader(c,a[c]);e.send()},j.prototype.get=function(e){return this._headers.get(e)},T.prototype.open=function(e,t,n,r,o,i,a){var s=new y,c=s.signal,u=new v;h(o,{headers:a,credentials:i?"include":"same-origin",signal:c,cache:"no-store"}).then((function(e){var r=e.body.getReader();return t(e.status,e.statusText,e.headers.get("Content-Type"),new j(e.headers),(function(){s.abort(),r.cancel()})),new f((function(e,t){var o=function(){r.read().then((function(t){if(t.done)e(void 0);else{var r=u.decode(t.value,{stream:!0});n(r),o()}})).catch((function(e){t(e)}))};o()}))})).finally((function(){r()}))},O.prototype.dispatchEvent=function(e){e.target=this;var t=this._listeners[e.type];if(void 0!=t)for(var n=t.length,r=0;r<n;r+=1){var o=t[r];try{"function"===typeof o.handleEvent?o.handleEvent(e):o.call(this,e)}catch(i){x(i)}}},O.prototype.addEventListener=function(e,t){e=String(e);var n=this._listeners,r=n[e];void 0==r&&(r=[],n[e]=r);for(var o=!1,i=0;i<r.length;i+=1)r[i]===t&&(o=!0);o||r.push(t)},O.prototype.removeEventListener=function(e,t){e=String(e);var n=this._listeners,r=n[e];if(void 0!=r){for(var o=[],i=0;i<r.length;i+=1)r[i]!==t&&o.push(r[i]);0===o.length?delete n[e]:n[e]=o}},N.prototype=Object.create(I.prototype),A.prototype=Object.create(I.prototype);var D=-1,R=0,k=1,P=2,B=-1,L=0,M=1,F=2,G=3,W=/^text\/event\-stream;?(\s*charset\=utf\-8)?$/i,U=function(e,t){var n=parseInt(e,10);return n!==n&&(n=t),H(n)},H=function(e){return Math.min(Math.max(e,1e3),18e6)},K=function(e,t,n){try{"function"===typeof t&&t.call(e,n)}catch(r){x(r)}};function z(e,t){O.call(this),this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this._close=void 0,function(e,t,n){t=String(t);var r=void 0!=n&&Boolean(n.withCredentials),o=H(1e3),i=void 0!=n&&void 0!=n.heartbeatTimeout?U(n.heartbeatTimeout,45e3):H(45e3),l="",d=o,f=!1,h=void 0!=n&&void 0!=n.headers?JSON.parse(JSON.stringify(n.headers)):void 0,p=void 0!=n&&void 0!=n.Transport?n.Transport:void 0!=c&&"withCredentials"in c.prototype||void 0==u?c:u,v=!q||void 0!=n&&void 0!=n.Transport?new w(new p):void 0,g=void 0==v?new T:new C,y=void 0,m=0,b=D,S="",_="",E="",j="",O=L,z=0,V=0,J=function(t,n,r,i,a){if(b===R)if(y=a,200===t&&void 0!=r&&W.test(r)){b=k,f=!0,d=o,e.readyState=k;var s=new A("open",{status:t,statusText:n,headers:i});e.dispatchEvent(s),K(e,e.onopen,s)}else{var c="";200!==t?(n&&(n=n.replace(/\s+/g," ")),c="EventSource's response has a status "+t+" "+n+" that is not 200. Aborting the connection."):c="EventSource's response has a Content-Type specifying an unsupported type: "+(void 0==r?"-":r.replace(/\s+/g," "))+". Aborting the connection.",x(new Error(c)),Y();s=new A("error",{status:t,statusText:n,headers:i});e.dispatchEvent(s),K(e,e.onerror,s)}},X=function(t){if(b===k){for(var n=-1,r=0;r<t.length;r+=1){(h=t.charCodeAt(r))!=="\n".charCodeAt(0)&&h!=="\r".charCodeAt(0)||(n=r)}var c=(-1!==n?j:"")+t.slice(0,n+1);j=(-1===n?j:"")+t.slice(n+1),""!==c&&(f=!0);for(var u=0;u<c.length;u+=1){var h=c.charCodeAt(u);if(O===B&&h==="\n".charCodeAt(0))O=L;else if(O===B&&(O=L),h==="\r".charCodeAt(0)||h==="\n".charCodeAt(0)){if(O!==L){O===M&&(V=u+1);var p=c.slice(z,V-1),v=c.slice(V+(V<u&&c.charCodeAt(V)===" ".charCodeAt(0)?1:0),u);"data"===p?(S+="\n",S+=v):"id"===p?_=v:"event"===p?E=v:"retry"===p?(o=U(v,o),d=o):"heartbeatTimeout"===p&&(i=U(v,i),0!==m&&(s(m),m=a((function(){Z()}),i)))}if(O===L){if(""!==S){l=_,""===E&&(E="message");var g=new N(E,{data:S.slice(1),lastEventId:_});if(e.dispatchEvent(g),"message"===E&&K(e,e.onmessage,g),b===P)return}S="",E=""}O=h==="\r".charCodeAt(0)?B:L}else O===L&&(z=u,O=M),O===M?h===":".charCodeAt(0)&&(V=u+1,O=F):O===F&&(O=G)}}},Q=function(){if(b===k||b===R){b=D,0!==m&&(s(m),m=0),m=a((function(){Z()}),d),d=H(Math.min(16*o,2*d)),e.readyState=R;var t=new I("error");e.dispatchEvent(t),K(e,e.onerror,t)}},Y=function(){b=P,void 0!=y&&(y(),y=void 0),0!==m&&(s(m),m=0),e.readyState=P},Z=function(){if(m=0,b===D){f=!1,m=a((function(){Z()}),i),b=R,S="",E="",_=l,j="",z=0,V=0,O=L;var e=t;"data:"!==t.slice(0,5)&&"blob:"!==t.slice(0,5)&&""!==l&&(e+=(-1===t.indexOf("?")?"?":"&")+"lastEventId="+encodeURIComponent(l));var n={Accept:"text/event-stream"};if(void 0!=h)for(var o in h)Object.prototype.hasOwnProperty.call(h,o)&&(n[o]=h[o]);try{g.open(v,J,X,Q,e,r,n)}catch(s){throw Y(),s}}else f||void 0==y?(f=!1,m=a((function(){Z()}),i)):(x(new Error("No activity within "+i+" milliseconds. Reconnecting.")),y(),y=void 0)};e.url=t,e.readyState=R,e.withCredentials=r,e._close=Y,Z()}(this,e,t)}var q=void 0!=h&&void 0!=p&&"body"in p.prototype;z.prototype=Object.create(O.prototype),z.prototype.CONNECTING=R,z.prototype.OPEN=k,z.prototype.CLOSED=P,z.prototype.close=function(){this._close()},z.CONNECTING=R,z.OPEN=k,z.CLOSED=P,z.prototype.withCredentials=void 0,function(n){if("object"===typeof e.exports){var a=n(t);void 0!==a&&(e.exports=a)}else o=[t],void 0===(i="function"===typeof(r=n)?r.apply(t,o):r)||(e.exports=i)}((function(e){e.EventSourcePolyfill=z,e.NativeEventSource=l,void 0==c||void 0!=l&&"withCredentials"in l.prototype||(e.EventSource=z)}))}("undefined"!==typeof window?window:this)},function(e,t,n){e.exports=n(5)},function(e,t,n){"use strict";n.r(t);var r=n(6),o=n(8),i=n.n(o),a="",s="",c="",u={},l=0,d=5e3,f=!1,h=0,p=0;try{i.a.config({name:"SSE_DB",version:1,storeName:"SSE_store",description:"SSE store"})}catch(m){console.error(m)}var v=function(e,t,n){var o=Object(r.default)(e,t,n);return y(o),o},g=function(){clearTimeout(l),f=!1},y=function(e){e.addEventListener("pageAction",(function(e){"refresh"==e.data&&location.reload(!0)})),e.addEventListener("error",(function(t){var n="Connection is closed by the server";if(h<p)e.closeSSEConnection(n),console.log(n),f||(f=!0,l=setTimeout((function(){g();var e=v(a,s,c);for(var t in u)e.addEventListener(t,u[t])}),d),h++);else if(h==p){n="Last try to create connection is over.";e.closeConnectionOnlyNotMessagePort(n),h++}})),e.addEventListener("open",(function(e){console.log("New Connection is created with the server")}))};window.SSE=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/sharedWorker.js";console.log(t);var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];a=e,s=t,c=n,p=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:5e3;var r=v(e,t,n);return r.closeConnection=function(){var e="Connection is closed by the user";r.closeSSEConnection(e),console.log(e)},r.addEventListenerSse=function(e,t){r.addEventListener(e,t),e in u||(u[e]=t)},r},window.localforage=i.a},function(e,t,n){"use strict";n.r(t);var r=n(2),o=n(7),i=n(3),a=self.EventSource||i.NativeEventSource||i.EventSourcePolyfill;t.default=function(e,t,n){return window.SharedWorker?(console.log("Shared worker is started"),new o.default(e,{withCredentials:n},t)):a?(console.log("SSE is started"),new r.default(e,{withCredentials:n})):void console.error("Shared Worker & SSE are not supported.")}},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return i}));var i=function(){function e(t,n,r){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"createSharedWorker",(function(e){i.sharedWorker=new SharedWorker(e),i.sharedWorker.port.onmessage=function(e){i.listeners[e.data.event]&&i.listeners[e.data.event][0](e.data)},i.sharedWorker.onerror=function(e){console.log(e),console.log("Shared worker is closed due to error."),i.port&&i.port.close(),i.closeSSEConnection("Shared worker is closed due to error.")},window.addEventListener("unload",(function(){i.sharedWorker.port.postMessage({eventType:"tabClose"}),i.port&&i.port.close()}))})),o(this,"closeSSEConnection",(function(e){i.sharedWorker.port.postMessage({eventType:"close",message:e})})),o(this,"closeConnectionOnlyNotMessagePort",(function(e){i.sharedWorker.port.postMessage({eventType:"closeConnectionOnly",message:e})})),this.url=t,this.configuration=n,this.listeners={},this.sharedWorker=null,this.createSharedWorker(r)}var t,n,i;return t=e,(n=[{key:"addEventListener",value:function(e,t){this.sharedWorker.port.postMessage({eventSourceURL:this.url,configuration:this.configuration,eventType:e}),e in this.listeners||(this.listeners[e]=[]),this.listeners[e].push(t)}},{key:"removeEventListener",value:function(e,t){if(e in this.listeners)for(var n=this.listeners[e],r=0,o=n.length;r<o;r++)if(n[r]===t)return void n.splice(r,1)}}])&&r(t.prototype,n),i&&r(t,i),e}()},function(e,t,n){(function(t){e.exports=function e(t,n,r){function o(a,s){if(!n[a]){if(!t[a]){if(i)return i(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};t[a][0].call(u.exports,(function(e){var n=t[a][1][e];return o(n||e)}),u,u.exports,e,t,n,r)}return n[a].exports}for(var i=!1,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,n,r){(function(e){"use strict";var t,r,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var i=0,a=new o(l),s=e.document.createTextNode("");a.observe(s,{characterData:!0}),t=function(){s.data=i=++i%2}}else if(e.setImmediate||"undefined"===typeof e.MessageChannel)t="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){l(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(l,0)};else{var c=new e.MessageChannel;c.port1.onmessage=l,t=function(){c.port2.postMessage(0)}}var u=[];function l(){var e,t;r=!0;for(var n=u.length;n;){for(t=u,u=[],e=-1;++e<n;)t[e]();n=u.length}r=!1}function d(e){1!==u.push(e)||r||t()}n.exports=d}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(e,t,n){"use strict";var r=e(1);function o(){}var i={},a=["REJECTED"],s=["FULFILLED"],c=["PENDING"];function u(e){if("function"!==typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==o&&h(this,e)}function l(e,t,n){this.promise=e,"function"===typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"===typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function d(e,t,n){r((function(){var r;try{r=t(n)}catch(o){return i.reject(e,o)}r===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,r)}))}function f(e){var t=e&&e.then;if(e&&("object"===typeof e||"function"===typeof e)&&"function"===typeof t)return function(){t.apply(e,arguments)}}function h(e,t){var n=!1;function r(t){n||(n=!0,i.reject(e,t))}function o(t){n||(n=!0,i.resolve(e,t))}function a(){t(o,r)}var s=p(a);"error"===s.status&&r(s.value)}function p(e,t){var n={};try{n.value=e(t),n.status="success"}catch(r){n.status="error",n.value=r}return n}function v(e){return e instanceof this?e:i.resolve(new this(o),e)}function g(e){var t=new this(o);return i.reject(t,e)}function y(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=new Array(n),s=0,c=-1,u=new this(o);++c<n;)l(e[c],c);return u;function l(e,o){function c(e){a[o]=e,++s!==n||r||(r=!0,i.resolve(u,a))}t.resolve(e).then(c,(function(e){r||(r=!0,i.reject(u,e))}))}}function m(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var a=-1,s=new this(o);++a<n;)c(e[a]);return s;function c(e){t.resolve(e).then((function(e){r||(r=!0,i.resolve(s,e))}),(function(e){r||(r=!0,i.reject(s,e))}))}}t.exports=u,u.prototype.catch=function(e){return this.then(null,e)},u.prototype.then=function(e,t){if("function"!==typeof e&&this.state===s||"function"!==typeof t&&this.state===a)return this;var n=new this.constructor(o);return this.state!==c?d(n,this.state===s?e:t,this.outcome):this.queue.push(new l(n,e,t)),n},l.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},l.prototype.otherCallFulfilled=function(e){d(this.promise,this.onFulfilled,e)},l.prototype.callRejected=function(e){i.reject(this.promise,e)},l.prototype.otherCallRejected=function(e){d(this.promise,this.onRejected,e)},i.resolve=function(e,t){var n=p(f,t);if("error"===n.status)return i.reject(e,n.value);var r=n.value;if(r)h(e,r);else{e.state=s,e.outcome=t;for(var o=-1,a=e.queue.length;++o<a;)e.queue[o].callFulfilled(t)}return e},i.reject=function(e,t){e.state=a,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},u.resolve=v,u.reject=g,u.all=y,u.race=m},{1:1}],3:[function(e,n,r){(function(t){"use strict";"function"!==typeof t.Promise&&(t.Promise=e(2))}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{2:2}],4:[function(e,t,n){"use strict";var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(){try{if("undefined"!==typeof indexedDB)return indexedDB;if("undefined"!==typeof webkitIndexedDB)return webkitIndexedDB;if("undefined"!==typeof mozIndexedDB)return mozIndexedDB;if("undefined"!==typeof OIndexedDB)return OIndexedDB;if("undefined"!==typeof msIndexedDB)return msIndexedDB}catch(e){return}}var a=i();function s(){try{if(!a)return!1;var e="undefined"!==typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),t="function"===typeof fetch&&-1!==fetch.toString().indexOf("[native code");return(!e||t)&&"undefined"!==typeof indexedDB&&"undefined"!==typeof IDBKeyRange}catch(n){return!1}}function c(e,t){e=e||[],t=t||{};try{return new Blob(e,t)}catch(o){if("TypeError"!==o.name)throw o;for(var n=new("undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof MSBlobBuilder?MSBlobBuilder:"undefined"!==typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),r=0;r<e.length;r+=1)n.append(e[r]);return n.getBlob(t.type)}}"undefined"===typeof Promise&&e(3);var u=Promise;function l(e,t){t&&e.then((function(e){t(null,e)}),(function(e){t(e)}))}function d(e,t,n){"function"===typeof t&&e.then(t),"function"===typeof n&&e.catch(n)}function f(e){return"string"!==typeof e&&(console.warn(e+" used as a key, but it is not a string."),e=String(e)),e}function h(){if(arguments.length&&"function"===typeof arguments[arguments.length-1])return arguments[arguments.length-1]}var p="local-forage-detect-blob-support",v=void 0,g={},y=Object.prototype.toString,m="readonly",b="readwrite";function S(e){for(var t=e.length,n=new ArrayBuffer(t),r=new Uint8Array(n),o=0;o<t;o++)r[o]=e.charCodeAt(o);return n}function w(e){return new u((function(t){var n=e.transaction(p,b),r=c([""]);n.objectStore(p).put(r,"key"),n.onabort=function(e){e.preventDefault(),e.stopPropagation(),t(!1)},n.oncomplete=function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);t(n||!e||parseInt(e[1],10)>=43)}})).catch((function(){return!1}))}function _(e){return"boolean"===typeof v?u.resolve(v):w(e).then((function(e){return v=e}))}function E(e){var t=g[e.name],n={};n.promise=new u((function(e,t){n.resolve=e,n.reject=t})),t.deferredOperations.push(n),t.dbReady?t.dbReady=t.dbReady.then((function(){return n.promise})):t.dbReady=n.promise}function C(e){var t=g[e.name].deferredOperations.pop();if(t)return t.resolve(),t.promise}function j(e,t){var n=g[e.name].deferredOperations.pop();if(n)return n.reject(t),n.promise}function T(e,t){return new u((function(n,r){if(g[e.name]=g[e.name]||B(),e.db){if(!t)return n(e.db);E(e),e.db.close()}var o=[e.name];t&&o.push(e.version);var i=a.open.apply(a,o);t&&(i.onupgradeneeded=function(t){var n=i.result;try{n.createObjectStore(e.storeName),t.oldVersion<=1&&n.createObjectStore(p)}catch(r){if("ConstraintError"!==r.name)throw r;console.warn('The database "'+e.name+'" has been upgraded from version '+t.oldVersion+" to version "+t.newVersion+', but the storage "'+e.storeName+'" already exists.')}}),i.onerror=function(e){e.preventDefault(),r(i.error)},i.onsuccess=function(){n(i.result),C(e)}}))}function O(e){return T(e,!1)}function x(e){return T(e,!0)}function I(e,t){if(!e.db)return!0;var n=!e.db.objectStoreNames.contains(e.storeName),r=e.version<e.db.version,o=e.version>e.db.version;if(r&&(e.version!==t&&console.warn('The database "'+e.name+"\" can't be downgraded from version "+e.db.version+" to version "+e.version+"."),e.version=e.db.version),o||n){if(n){var i=e.db.version+1;i>e.version&&(e.version=i)}return!0}return!1}function N(e){return new u((function(t,n){var r=new FileReader;r.onerror=n,r.onloadend=function(n){var r=btoa(n.target.result||"");t({__local_forage_encoded_blob:!0,data:r,type:e.type})},r.readAsBinaryString(e)}))}function A(e){return c([S(atob(e.data))],{type:e.type})}function D(e){return e&&e.__local_forage_encoded_blob}function R(e){var t=this,n=t._initReady().then((function(){var e=g[t._dbInfo.name];if(e&&e.dbReady)return e.dbReady}));return d(n,e,e),n}function k(e){E(e);for(var t=g[e.name],n=t.forages,r=0;r<n.length;r++){var o=n[r];o._dbInfo.db&&(o._dbInfo.db.close(),o._dbInfo.db=null)}return e.db=null,O(e).then((function(t){return e.db=t,I(e)?x(e):t})).then((function(r){e.db=t.db=r;for(var o=0;o<n.length;o++)n[o]._dbInfo.db=r})).catch((function(t){throw j(e,t),t}))}function P(e,t,n,r){void 0===r&&(r=1);try{var o=e.db.transaction(e.storeName,t);n(null,o)}catch(i){if(r>0&&(!e.db||"InvalidStateError"===i.name||"NotFoundError"===i.name))return u.resolve().then((function(){if(!e.db||"NotFoundError"===i.name&&!e.db.objectStoreNames.contains(e.storeName)&&e.version<=e.db.version)return e.db&&(e.version=e.db.version+1),x(e)})).then((function(){return k(e).then((function(){P(e,t,n,r-1)}))})).catch(n);n(i)}}function B(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function L(e){var t=this,n={db:null};if(e)for(var r in e)n[r]=e[r];var o=g[n.name];o||(o=B(),g[n.name]=o),o.forages.push(t),t._initReady||(t._initReady=t.ready,t.ready=R);var i=[];function a(){return u.resolve()}for(var s=0;s<o.forages.length;s++){var c=o.forages[s];c!==t&&i.push(c._initReady().catch(a))}var l=o.forages.slice(0);return u.all(i).then((function(){return n.db=o.db,O(n)})).then((function(e){return n.db=e,I(n,t._defaultConfig.version)?x(n):e})).then((function(e){n.db=o.db=e,t._dbInfo=n;for(var r=0;r<l.length;r++){var i=l[r];i!==t&&(i._dbInfo.db=n.db,i._dbInfo.version=n.version)}}))}function M(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){P(n._dbInfo,m,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).get(e);a.onsuccess=function(){var e=a.result;void 0===e&&(e=null),D(e)&&(e=A(e)),t(e)},a.onerror=function(){r(a.error)}}catch(s){r(s)}}))})).catch(r)}));return l(r,t),r}function F(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){P(n._dbInfo,m,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).openCursor(),s=1;a.onsuccess=function(){var n=a.result;if(n){var r=n.value;D(r)&&(r=A(r));var o=e(r,n.key,s++);void 0!==o?t(o):n.continue()}else t()},a.onerror=function(){r(a.error)}}catch(c){r(c)}}))})).catch(r)}));return l(r,t),r}function G(e,t,n){var r=this;e=f(e);var o=new u((function(n,o){var i;r.ready().then((function(){return i=r._dbInfo,"[object Blob]"===y.call(t)?_(i.db).then((function(e){return e?t:N(t)})):t})).then((function(t){P(r._dbInfo,b,(function(i,a){if(i)return o(i);try{var s=a.objectStore(r._dbInfo.storeName);null===t&&(t=void 0);var c=s.put(t,e);a.oncomplete=function(){void 0===t&&(t=null),n(t)},a.onabort=a.onerror=function(){var e=c.error?c.error:c.transaction.error;o(e)}}catch(u){o(u)}}))})).catch(o)}));return l(o,n),o}function W(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){P(n._dbInfo,b,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName).delete(e);i.oncomplete=function(){t()},i.onerror=function(){r(a.error)},i.onabort=function(){var e=a.error?a.error:a.transaction.error;r(e)}}catch(s){r(s)}}))})).catch(r)}));return l(r,t),r}function U(e){var t=this,n=new u((function(e,n){t.ready().then((function(){P(t._dbInfo,b,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).clear();o.oncomplete=function(){e()},o.onabort=o.onerror=function(){var e=i.error?i.error:i.transaction.error;n(e)}}catch(a){n(a)}}))})).catch(n)}));return l(n,e),n}function H(e){var t=this,n=new u((function(e,n){t.ready().then((function(){P(t._dbInfo,m,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).count();i.onsuccess=function(){e(i.result)},i.onerror=function(){n(i.error)}}catch(a){n(a)}}))})).catch(n)}));return l(n,e),n}function K(e,t){var n=this,r=new u((function(t,r){e<0?t(null):n.ready().then((function(){P(n._dbInfo,m,(function(o,i){if(o)return r(o);try{var a=i.objectStore(n._dbInfo.storeName),s=!1,c=a.openCursor();c.onsuccess=function(){var n=c.result;n?0===e||s?t(n.key):(s=!0,n.advance(e)):t(null)},c.onerror=function(){r(c.error)}}catch(u){r(u)}}))})).catch(r)}));return l(r,t),r}function z(e){var t=this,n=new u((function(e,n){t.ready().then((function(){P(t._dbInfo,m,(function(r,o){if(r)return n(r);try{var i=o.objectStore(t._dbInfo.storeName).openCursor(),a=[];i.onsuccess=function(){var t=i.result;t?(a.push(t.key),t.continue()):e(a)},i.onerror=function(){n(i.error)}}catch(s){n(s)}}))})).catch(n)}));return l(n,e),n}function q(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;if(e.name){var i=e.name===n.name&&o._dbInfo.db?u.resolve(o._dbInfo.db):O(e).then((function(t){var n=g[e.name],r=n.forages;n.db=t;for(var o=0;o<r.length;o++)r[o]._dbInfo.db=t;return t}));r=e.storeName?i.then((function(t){if(t.objectStoreNames.contains(e.storeName)){var n=t.version+1;E(e);var r=g[e.name],o=r.forages;t.close();for(var i=0;i<o.length;i++){var s=o[i];s._dbInfo.db=null,s._dbInfo.version=n}var c=new u((function(t,r){var o=a.open(e.name,n);o.onerror=function(e){o.result.close(),r(e)},o.onupgradeneeded=function(){o.result.deleteObjectStore(e.storeName)},o.onsuccess=function(){var e=o.result;e.close(),t(e)}}));return c.then((function(e){r.db=e;for(var t=0;t<o.length;t++){var n=o[t];n._dbInfo.db=e,C(n._dbInfo)}})).catch((function(t){throw(j(e,t)||u.resolve()).catch((function(){})),t}))}})):i.then((function(t){E(e);var n=g[e.name],r=n.forages;t.close();for(var o=0;o<r.length;o++)r[o]._dbInfo.db=null;var i=new u((function(t,n){var r=a.deleteDatabase(e.name);r.onerror=r.onblocked=function(e){var t=r.result;t&&t.close(),n(e)},r.onsuccess=function(){var e=r.result;e&&e.close(),t(e)}}));return i.then((function(e){n.db=e;for(var t=0;t<r.length;t++)C(r[t]._dbInfo)})).catch((function(t){throw(j(e,t)||u.resolve()).catch((function(){})),t}))}))}else r=u.reject("Invalid arguments");return l(r,t),r}var V={_driver:"asyncStorage",_initStorage:L,_support:s(),iterate:F,getItem:M,setItem:G,removeItem:W,clear:U,length:H,key:K,keys:z,dropInstance:q};function J(){return"function"===typeof openDatabase}var X="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Q="~~local_forage_type~",Y=/^~~local_forage_type~([^~]+)~/,Z="__lfsc__:",$=Z.length,ee="arbf",te="blob",ne="si08",re="ui08",oe="uic8",ie="si16",ae="si32",se="ur16",ce="ui32",ue="fl32",le="fl64",de=$+ee.length,fe=Object.prototype.toString;function he(e){var t,n,r,o,i,a=.75*e.length,s=e.length,c=0;"="===e[e.length-1]&&(a--,"="===e[e.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(t=0;t<s;t+=4)n=X.indexOf(e[t]),r=X.indexOf(e[t+1]),o=X.indexOf(e[t+2]),i=X.indexOf(e[t+3]),l[c++]=n<<2|r>>4,l[c++]=(15&r)<<4|o>>2,l[c++]=(3&o)<<6|63&i;return u}function pe(e){var t,n=new Uint8Array(e),r="";for(t=0;t<n.length;t+=3)r+=X[n[t]>>2],r+=X[(3&n[t])<<4|n[t+1]>>4],r+=X[(15&n[t+1])<<2|n[t+2]>>6],r+=X[63&n[t+2]];return n.length%3===2?r=r.substring(0,r.length-1)+"=":n.length%3===1&&(r=r.substring(0,r.length-2)+"=="),r}function ve(e,t){var n="";if(e&&(n=fe.call(e)),e&&("[object ArrayBuffer]"===n||e.buffer&&"[object ArrayBuffer]"===fe.call(e.buffer))){var r,o=Z;e instanceof ArrayBuffer?(r=e,o+=ee):(r=e.buffer,"[object Int8Array]"===n?o+=ne:"[object Uint8Array]"===n?o+=re:"[object Uint8ClampedArray]"===n?o+=oe:"[object Int16Array]"===n?o+=ie:"[object Uint16Array]"===n?o+=se:"[object Int32Array]"===n?o+=ae:"[object Uint32Array]"===n?o+=ce:"[object Float32Array]"===n?o+=ue:"[object Float64Array]"===n?o+=le:t(new Error("Failed to get type for BinaryArray"))),t(o+pe(r))}else if("[object Blob]"===n){var i=new FileReader;i.onload=function(){var n=Q+e.type+"~"+pe(this.result);t(Z+te+n)},i.readAsArrayBuffer(e)}else try{t(JSON.stringify(e))}catch(a){console.error("Couldn't convert value into a JSON string: ",e),t(null,a)}}function ge(e){if(e.substring(0,$)!==Z)return JSON.parse(e);var t,n=e.substring(de),r=e.substring($,de);if(r===te&&Y.test(n)){var o=n.match(Y);t=o[1],n=n.substring(o[0].length)}var i=he(n);switch(r){case ee:return i;case te:return c([i],{type:t});case ne:return new Int8Array(i);case re:return new Uint8Array(i);case oe:return new Uint8ClampedArray(i);case ie:return new Int16Array(i);case se:return new Uint16Array(i);case ae:return new Int32Array(i);case ce:return new Uint32Array(i);case ue:return new Float32Array(i);case le:return new Float64Array(i);default:throw new Error("Unkown type: "+r)}}var ye={serialize:ve,deserialize:ge,stringToBuffer:he,bufferToString:pe};function me(e,t,n,r){e.executeSql("CREATE TABLE IF NOT EXISTS "+t.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],n,r)}function be(e){var t=this,n={db:null};if(e)for(var r in e)n[r]="string"!==typeof e[r]?e[r].toString():e[r];var o=new u((function(e,r){try{n.db=openDatabase(n.name,String(n.version),n.description,n.size)}catch(o){return r(o)}n.db.transaction((function(o){me(o,n,(function(){t._dbInfo=n,e()}),(function(e,t){r(t)}))}),r)}));return n.serializer=ye,o}function Se(e,t,n,r,o,i){e.executeSql(n,r,o,(function(e,a){a.code===a.SYNTAX_ERR?e.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[t.storeName],(function(e,s){s.rows.length?i(e,a):me(e,t,(function(){e.executeSql(n,r,o,i)}),i)}),i):i(e,a)}),i)}function we(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Se(n,o,"SELECT * FROM "+o.storeName+" WHERE key = ? LIMIT 1",[e],(function(e,n){var r=n.rows.length?n.rows.item(0).value:null;r&&(r=o.serializer.deserialize(r)),t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function _e(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Se(n,o,"SELECT * FROM "+o.storeName,[],(function(n,r){for(var i=r.rows,a=i.length,s=0;s<a;s++){var c=i.item(s),u=c.value;if(u&&(u=o.serializer.deserialize(u)),void 0!==(u=e(u,c.key,s+1)))return void t(u)}t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ee(e,t,n,r){var o=this;e=f(e);var i=new u((function(i,a){o.ready().then((function(){void 0===t&&(t=null);var s=t,c=o._dbInfo;c.serializer.serialize(t,(function(t,u){u?a(u):c.db.transaction((function(n){Se(n,c,"INSERT OR REPLACE INTO "+c.storeName+" (key, value) VALUES (?, ?)",[e,t],(function(){i(s)}),(function(e,t){a(t)}))}),(function(t){if(t.code===t.QUOTA_ERR){if(r>0)return void i(Ee.apply(o,[e,s,n,r-1]));a(t)}}))}))})).catch(a)}));return l(i,n),i}function Ce(e,t,n){return Ee.apply(this,[e,t,n,1])}function je(e,t){var n=this;e=f(e);var r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Se(n,o,"DELETE FROM "+o.storeName+" WHERE key = ?",[e],(function(){t()}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Te(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Se(t,r,"DELETE FROM "+r.storeName,[],(function(){e()}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Oe(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Se(t,r,"SELECT COUNT(key) as c FROM "+r.storeName,[],(function(t,n){var r=n.rows.item(0).c;e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function xe(e,t){var n=this,r=new u((function(t,r){n.ready().then((function(){var o=n._dbInfo;o.db.transaction((function(n){Se(n,o,"SELECT key FROM "+o.storeName+" WHERE id = ? LIMIT 1",[e+1],(function(e,n){var r=n.rows.length?n.rows.item(0).key:null;t(r)}),(function(e,t){r(t)}))}))})).catch(r)}));return l(r,t),r}function Ie(e){var t=this,n=new u((function(e,n){t.ready().then((function(){var r=t._dbInfo;r.db.transaction((function(t){Se(t,r,"SELECT key FROM "+r.storeName,[],(function(t,n){for(var r=[],o=0;o<n.rows.length;o++)r.push(n.rows.item(o).key);e(r)}),(function(e,t){n(t)}))}))})).catch(n)}));return l(n,e),n}function Ne(e){return new u((function(t,n){e.transaction((function(r){r.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],(function(n,r){for(var o=[],i=0;i<r.rows.length;i++)o.push(r.rows.item(i).name);t({db:e,storeNames:o})}),(function(e,t){n(t)}))}),(function(e){n(e)}))}))}function Ae(e,t){t=h.apply(this,arguments);var n=this.config();(e="function"!==typeof e&&e||{}).name||(e.name=e.name||n.name,e.storeName=e.storeName||n.storeName);var r,o=this;return l(r=e.name?new u((function(t){var r;r=e.name===n.name?o._dbInfo.db:openDatabase(e.name,"","",0),e.storeName?t({db:r,storeNames:[e.storeName]}):t(Ne(r))})).then((function(e){return new u((function(t,n){e.db.transaction((function(r){function o(e){return new u((function(t,n){r.executeSql("DROP TABLE IF EXISTS "+e,[],(function(){t()}),(function(e,t){n(t)}))}))}for(var i=[],a=0,s=e.storeNames.length;a<s;a++)i.push(o(e.storeNames[a]));u.all(i).then((function(){t()})).catch((function(e){n(e)}))}),(function(e){n(e)}))}))})):u.reject("Invalid arguments"),t),r}var De={_driver:"webSQLStorage",_initStorage:be,_support:J(),iterate:_e,getItem:we,setItem:Ce,removeItem:je,clear:Te,length:Oe,key:xe,keys:Ie,dropInstance:Ae};function Re(){try{return"undefined"!==typeof localStorage&&"setItem"in localStorage&&!!localStorage.setItem}catch(e){return!1}}function ke(e,t){var n=e.name+"/";return e.storeName!==t.storeName&&(n+=e.storeName+"/"),n}function Pe(){var e="_localforage_support_test";try{return localStorage.setItem(e,!0),localStorage.removeItem(e),!1}catch(t){return!0}}function Be(){return!Pe()||localStorage.length>0}function Le(e){var t=this,n={};if(e)for(var r in e)n[r]=e[r];return n.keyPrefix=ke(e,t._defaultConfig),Be()?(t._dbInfo=n,n.serializer=ye,u.resolve()):u.reject()}function Me(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo.keyPrefix,n=localStorage.length-1;n>=0;n--){var r=localStorage.key(n);0===r.indexOf(e)&&localStorage.removeItem(r)}}));return l(n,e),n}function Fe(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo,r=localStorage.getItem(t.keyPrefix+e);return r&&(r=t.serializer.deserialize(r)),r}));return l(r,t),r}function Ge(e,t){var n=this,r=n.ready().then((function(){for(var t=n._dbInfo,r=t.keyPrefix,o=r.length,i=localStorage.length,a=1,s=0;s<i;s++){var c=localStorage.key(s);if(0===c.indexOf(r)){var u=localStorage.getItem(c);if(u&&(u=t.serializer.deserialize(u)),void 0!==(u=e(u,c.substring(o),a++)))return u}}}));return l(r,t),r}function We(e,t){var n=this,r=n.ready().then((function(){var t,r=n._dbInfo;try{t=localStorage.key(e)}catch(o){t=null}return t&&(t=t.substring(r.keyPrefix.length)),t}));return l(r,t),r}function Ue(e){var t=this,n=t.ready().then((function(){for(var e=t._dbInfo,n=localStorage.length,r=[],o=0;o<n;o++){var i=localStorage.key(o);0===i.indexOf(e.keyPrefix)&&r.push(i.substring(e.keyPrefix.length))}return r}));return l(n,e),n}function He(e){var t=this.keys().then((function(e){return e.length}));return l(t,e),t}function Ke(e,t){var n=this;e=f(e);var r=n.ready().then((function(){var t=n._dbInfo;localStorage.removeItem(t.keyPrefix+e)}));return l(r,t),r}function ze(e,t,n){var r=this;e=f(e);var o=r.ready().then((function(){void 0===t&&(t=null);var n=t;return new u((function(o,i){var a=r._dbInfo;a.serializer.serialize(t,(function(t,r){if(r)i(r);else try{localStorage.setItem(a.keyPrefix+e,t),o(n)}catch(s){"QuotaExceededError"!==s.name&&"NS_ERROR_DOM_QUOTA_REACHED"!==s.name||i(s),i(s)}}))}))}));return l(o,n),o}function qe(e,t){if(t=h.apply(this,arguments),!(e="function"!==typeof e&&e||{}).name){var n=this.config();e.name=e.name||n.name,e.storeName=e.storeName||n.storeName}var r,o=this;return r=e.name?new u((function(t){e.storeName?t(ke(e,o._defaultConfig)):t(e.name+"/")})).then((function(e){for(var t=localStorage.length-1;t>=0;t--){var n=localStorage.key(t);0===n.indexOf(e)&&localStorage.removeItem(n)}})):u.reject("Invalid arguments"),l(r,t),r}var Ve={_driver:"localStorageWrapper",_initStorage:Le,_support:Re(),iterate:Ge,getItem:Fe,setItem:ze,removeItem:Ke,clear:Me,length:He,key:We,keys:Ue,dropInstance:qe},Je=function(e,t){return e===t||"number"===typeof e&&"number"===typeof t&&isNaN(e)&&isNaN(t)},Xe=function(e,t){for(var n=e.length,r=0;r<n;){if(Je(e[r],t))return!0;r++}return!1},Qe=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},Ye={},Ze={},$e={INDEXEDDB:V,WEBSQL:De,LOCALSTORAGE:Ve},et=[$e.INDEXEDDB._driver,$e.WEBSQL._driver,$e.LOCALSTORAGE._driver],tt=["dropInstance"],nt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(tt),rt={description:"",driver:et.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function ot(e,t){e[t]=function(){var n=arguments;return e.ready().then((function(){return e[t].apply(e,n)}))}}function it(){for(var e=1;e<arguments.length;e++){var t=arguments[e];if(t)for(var n in t)t.hasOwnProperty(n)&&(Qe(t[n])?arguments[0][n]=t[n].slice():arguments[0][n]=t[n])}return arguments[0]}var at=function(){function e(t){for(var n in o(this,e),$e)if($e.hasOwnProperty(n)){var r=$e[n],i=r._driver;this[n]=i,Ye[i]||this.defineDriver(r)}this._defaultConfig=it({},rt),this._config=it({},this._defaultConfig,t),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch((function(){}))}return e.prototype.config=function(e){if("object"===("undefined"===typeof e?"undefined":r(e))){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var t in e){if("storeName"===t&&(e[t]=e[t].replace(/\W/g,"_")),"version"===t&&"number"!==typeof e[t])return new Error("Database version must be a number.");this._config[t]=e[t]}return!("driver"in e)||!e.driver||this.setDriver(this._config.driver)}return"string"===typeof e?this._config[e]:this._config},e.prototype.defineDriver=function(e,t,n){var r=new u((function(t,n){try{var r=e._driver,o=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!e._driver)return void n(o);for(var i=nt.concat("_initStorage"),a=0,s=i.length;a<s;a++){var c=i[a];if((!Xe(tt,c)||e[c])&&"function"!==typeof e[c])return void n(o)}var d=function(){for(var t=function(e){return function(){var t=new Error("Method "+e+" is not implemented by the current driver"),n=u.reject(t);return l(n,arguments[arguments.length-1]),n}},n=0,r=tt.length;n<r;n++){var o=tt[n];e[o]||(e[o]=t(o))}};d();var f=function(n){Ye[r]&&console.info("Redefining LocalForage driver: "+r),Ye[r]=e,Ze[r]=n,t()};"_support"in e?e._support&&"function"===typeof e._support?e._support().then(f,n):f(!!e._support):f(!0)}catch(h){n(h)}}));return d(r,t,n),r},e.prototype.driver=function(){return this._driver||null},e.prototype.getDriver=function(e,t,n){var r=Ye[e]?u.resolve(Ye[e]):u.reject(new Error("Driver not found."));return d(r,t,n),r},e.prototype.getSerializer=function(e){var t=u.resolve(ye);return d(t,e),t},e.prototype.ready=function(e){var t=this,n=t._driverSet.then((function(){return null===t._ready&&(t._ready=t._initDriver()),t._ready}));return d(n,e,e),n},e.prototype.setDriver=function(e,t,n){var r=this;Qe(e)||(e=[e]);var o=this._getSupportedDrivers(e);function i(){r._config.driver=r.driver()}function a(e){return r._extend(e),i(),r._ready=r._initStorage(r._config),r._ready}function s(e){return function(){var t=0;function n(){for(;t<e.length;){var o=e[t];return t++,r._dbInfo=null,r._ready=null,r.getDriver(o).then(a).catch(n)}i();var s=new Error("No available storage method found.");return r._driverSet=u.reject(s),r._driverSet}return n()}}var c=null!==this._driverSet?this._driverSet.catch((function(){return u.resolve()})):u.resolve();return this._driverSet=c.then((function(){var e=o[0];return r._dbInfo=null,r._ready=null,r.getDriver(e).then((function(e){r._driver=e._driver,i(),r._wrapLibraryMethodsWithReady(),r._initDriver=s(o)}))})).catch((function(){i();var e=new Error("No available storage method found.");return r._driverSet=u.reject(e),r._driverSet})),d(this._driverSet,t,n),this._driverSet},e.prototype.supports=function(e){return!!Ze[e]},e.prototype._extend=function(e){it(this,e)},e.prototype._getSupportedDrivers=function(e){for(var t=[],n=0,r=e.length;n<r;n++){var o=e[n];this.supports(o)&&t.push(o)}return t},e.prototype._wrapLibraryMethodsWithReady=function(){for(var e=0,t=nt.length;e<t;e++)ot(this,nt[e])},e.prototype.createInstance=function(t){return new e(t)},e}(),st=new at;t.exports=st},{3:3}]},{},[4])(4)}).call(this,n(9))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(r){"object"===typeof window&&(n=window)}e.exports=n}])},718:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"generateStreamingURL",(function(){return R})),n.d(r,"increaseAttemptCounter",(function(){return k})),n.d(r,"setTooltipSeen",(function(){return P})),n.d(r,"clearCommonError",(function(){return B})),n.d(r,"displayGPTToastError",(function(){return L})),n.d(r,"default",(function(){return M}));var o=n(0),i=n(21),a=n(72),s=n(176),c=n(320),u=n.n(c),l=n(321),d=n(323),f=n.n(d),h=(n(324),n(325),n(2));function p(e){const[t,n]=Object(o.useState)(null),{maxLength:r}=e;Object(o.useEffect)((()=>{let t;if(e.defaultValue){const n=f()(e.defaultValue);if(n){const e=s.ContentState.createFromBlockArray(n.contentBlocks);t=s.EditorState.createWithContent(e)}}else t=s.EditorState.createEmpty();n(t)}),[e.defaultValue]);const i=()=>{const e=t.getSelection();let n=0;if(!e.isCollapsed()){const r=t.getCurrentContent(),o=e.getStartKey(),i=e.getEndKey(),a=o===i,s=r.getBlockForKey(o).getLength()-e.getStartOffset(),c=e.getEndOffset(),u=r.getKeyAfter(i);if(a)n+=e.getEndOffset()-e.getStartOffset();else{let e=o;for(;e&&e!==u;)n+=e===o?s+1:e===i?c:r.getBlockForKey(e).getLength()+1,e=r.getKeyAfter(e)}}return n};return Object(h.jsxs)("div",{className:"editorContainer nonGPTEditor",children:[Object(h.jsx)(l.Editor,{toolbarHidden:e.toolbarHidden||!1,editorStyle:e.editorStyle||{},editorState:t,stripPastedStyles:!0,wrapperClassName:"editorWrapper",toolbarClassName:"editorToolBar",editorClassName:"textEditor",toolbar:{options:["inline","list"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline"]},list:{inDropdown:!1,options:["ordered","unordered"]}},onEditorStateChange:e=>{n(e)},handleBeforeInput:e=>{t.getCurrentContent().getPlainText().length;return t.getCurrentContent().getPlainText("").length-i()>=r?"handled":"not-handled"},handlePastedText:e=>{const o=t.getCurrentContent().getPlainText("").length,a=i();if(o+e.length-a>r){const o=t.getSelection().isCollapsed()?t:(()=>{const e=t.getSelection(),r=e.getStartKey(),o=e.getStartOffset(),i=e.getEndKey(),a=e.getEndOffset();if(r!==i||o!==a){const r=s.Modifier.removeRange(t.getCurrentContent(),e,"forward"),o=s.EditorState.push(t,r,"remove-range");return n(o),o}return t})();return((e,t)=>{const o=t.getCurrentContent().getPlainText().length;let i=r-o;const a=s.Modifier.insertText(t.getCurrentContent(),t.getSelection(),e.slice(0,i));n(s.EditorState.push(t,a,"insert-characters"))})(e,o),"handled"}return"not-handled"},keyBindingFn:function(e){if("Enter"==e.key){if(t.getCurrentContent().getPlainText("").length-i()>=r)return"enter-block"}return Object(s.getDefaultKeyBinding)(e)},handleKeyCommand:function(e){return"enter-block"===e?"handled":"not-handled"},onBlur:()=>{let n="";t.getCurrentContent().getPlainText()&&(n=u()(Object(s.convertToRaw)(t.getCurrentContent()))),e.onFieldBlur(n)},placeholder:e.placeholder}),e.notPremium?null:Object(h.jsx)("div",{className:"premiumContainer",children:Object(h.jsx)("span",{className:"addPreWritten",onClick:()=>{Object(a.J)(e,{uba:{eventName:"resumeMaker360Click",keyNames:{pageName:"Resume Editor",actionType:"click",actionSrc:"addFromPreWrittenSuggestion",isPaid:window.isPaidResumeBuilder}}}),e.showPaidSuggestions()},children:"View Suggestions"})}),t&&Object(h.jsxs)("span",{className:"charsCount",children:[t.getCurrentContent().getPlainText().length,"/",r]})]})}var v=n(83),g=n.p+"i/left-enabled.f2579f31.svg",y=n.p+"i/left-disabled.219ee1c6.svg",m=n.p+"i/right-enabled.8925ec38.svg",b=n.p+"i/right-disabled.718bb17b.svg",S=n.p+"i/generate-ai-icon.0b62d046.svg",w=n(20);n(666);const _=(e,t)=>{let n=e;try{window.sseConn=window.SSE(n,w.a.SHARED_WORKER_URL,!0,0,1e3),window.sseConn.addEventListenerSse("GPT_STREAM",(e=>{t&&t(e.data)}))}catch(r){console.error(r)}},E=()=>{window.sseConn.closeSSEConnection()};var C=function(e){let{tooltipErr:t,sectionName:n,layerName:r,currentIdx:i,editorContent:a,isTooltipSeen:s}=e||{};const[c,u]=Object(o.useState)(0),l=()=>{e.setShowTooltip(!1)},d=t=>{if(t.length){let n=t[c],o=t[c]&&t[c].content||"";o.includes("{contentField}")&&(o=o.replace("{contentField}",Object(v.j)(r)));let i=null!==n&&void 0!==n&&n.hasOwnProperty("text_cls")?n.text_cls:"";return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Object(h.jsx)("p",{className:"content-desc ".concat(i),children:o})}),Object(h.jsxs)("div",{className:"bottom-nav",children:[t.length>1&&Object(h.jsx)("div",{className:"page_idx",children:"".concat(c+1," / ").concat(t.length)}),n&&n.isButton&&Object(h.jsx)("div",{onClick:()=>{var t;(t=n)&&t.isSubmitBtn?(0==s&&e.setTooltipSeen({currentCounter:e.attempts,isTooltipSeen:!0,showGenAIFeatures:e.showGenAIFeatures},l),e.setShowTooltip(!1)):u((e=>e+1))},className:"btn-text",children:n.btn_Text})]})]})}},f=()=>{};return t?Object(h.jsx)("div",{onMouseLeave:f,className:"tooltiptext tooltipErrorPadding",children:d(t)}):Object(h.jsx)(h.Fragment,{children:0==e.isTooltipSeen&&Object(h.jsx)("div",{onMouseLeave:f,className:"tooltiptext",children:(()=>{let e=[];return e=a&&a.length?v.x.RW_AI:v.x.W_AI,d(e)})()})})},j=n(84),T=n(78),O=n(17);function x(e){var t;const[n,r]=Object(o.useState)(5),[i,c]=Object(o.useState)(null),[d,p]=Object(o.useState)(!1),[w,x]=Object(o.useState)(!1);let{editorTextError:I,setEditorTextError:N}=e||{};const[A,D]=Object(o.useState)(0),{maxLength:R}=e;let{sectionName:k,layerName:P,sectionIdx:B}=e||{},L=Object(v.r)(e.initialGPTResumeData[k][P],B)||null,M=e.resumeDrafts&&e.resumeDrafts[k]&&e.resumeDrafts[k][P]&&e.resumeDrafts[k][P][B]&&e.resumeDrafts[k][P][B].historyArr||[],F=e.resumeDrafts&&e.resumeDrafts[k]&&e.resumeDrafts[k][P]&&e.resumeDrafts[k][P][B]&&e.resumeDrafts[k][P][B].currentIdx||0,G=L||e.defaultValue||null,W=M;G&&(W=W&&W.length>0?[G,...W]:[G]);let U=W[F]?W[F].replace(/\\n/g,"<br>"):"",H=j.a.getState()||{},K=H.initialRMDetails&&H.initialRMDetails.tokenLimitReached&&H.initialRMDetails.tokenLimitReached[P]||!1,z=e.attempts,q=e.isTooltipSeen,V=Object(o.useRef)(!1),J=Object(o.useRef)(null),X=Object(o.useRef)(null),Q=Object(o.useRef)(G),Y=Object(o.useRef)(null);Object(o.useEffect)((()=>{}),[]),Object(o.useEffect)((()=>{0==n&&e.setDisabledGPTGenerateBtn&&e.setDisabledGPTGenerateBtn(!1)}),[n]),Object(o.useEffect)((()=>{let e;if(U){const t=f()(U);if(t){const n=s.ContentState.createFromBlockArray(t.contentBlocks);e=s.EditorState.createWithContent(n)}}else e=s.EditorState.createEmpty();c(e)}),[U,J.current]);const Z=()=>{const e=i.getSelection();let t=0;if(!e.isCollapsed()){const n=i.getCurrentContent(),r=e.getStartKey(),o=e.getEndKey(),a=r===o,s=n.getBlockForKey(r).getLength()-e.getStartOffset(),c=e.getEndOffset(),u=n.getKeyAfter(o);if(a)t+=e.getEndOffset()-e.getStartOffset();else{let e=r;for(;e&&e!==u;)t+=e===r?s+1:e===o?c:n.getBlockForKey(e).getLength()+1,e=n.getKeyAfter(e)}}return t},$=(t,n,r)=>{var o;Object(a.J)(e,{uba:{eventName:"resumeMaker360Click",keyNames:{pageName:(null===e||void 0===e||null===(o=e.route)||void 0===o?void 0:o.title)||"Resume Editor",actionType:"click",actionSrc:"genAISuggestion",isPaid:window.isPaidResumeBuilder,metaData:{action:"Write with AI",status:n,errorMsg:r||"",sectionName:P||""}}}})};const ee=(t,n)=>{if(n>=0&&n<W.length){let r="";i.getCurrentContent().getPlainText()&&(r=u()(Object(s.convertToRaw)(i.getCurrentContent()))),e.updateToggleHistory&&e.updateToggleHistory(k,P,n,B,t,r,G)}},te=()=>{let e=j.a.getState(),t=e.resumeData&&e.resumeData.templateData&&e.resumeData.templateData.jobseekerData&&e.resumeData.templateData.jobseekerData.resumeMakerPersonalDetails&&e.resumeData.templateData.jobseekerData.resumeMakerPersonalDetails.totalExp||null;if(!t)return"F";if("object"!=typeof t)return"E";t={month:"0",year:"0",...t};const n=t.year.concat(t.month);return["00","99-1","fresher"].includes(n)?"F":"E"},ne=e=>{let t=j.a.getState(),n=!0;e+="_".concat(te());let r=v.k[e]||null;if(!r)return!1;let o={},i=t.resumeData&&t.resumeData.templateData&&t.resumeData.templateData.jobseekerData||{};return Object.keys(r).map(((e,t)=>{let s=i[e]||null;if(r[e].isMandatory){let{valid:t,t_payload:r}=((e,t)=>{let n=0;switch(t=t||{},e){case"educationDetails":n=Object.keys(t).length;let e=!1;return 0==n?e=!1:Object.keys(t).map(((n,r)=>{t[n].length>0&&(e=!0)})),e?{valid:!0,t_payload:t}:(p(!0),x([{content:"Please fill atleast 1 education",isButton:!0,isSubmitBtn:!0,btn_Text:"Okay",text_cls:"error_cls"}]),{valid:!1,t_payload:t});case"workExDetails":if(n=Array.isArray(t)?t.length:Object.keys(t).length,0==n)return p(!0),x([{content:"Please fill atleast 1 work experience",isButton:!0,isSubmitBtn:!0,btn_Text:"Okay",text_cls:"error_cls"}]),{valid:!1,t_payload:t};{let e=[],n=!1;return t.map(((t,r)=>{let o=t.details||"",i=Object(a.n)(o);i.length>=25&&(n=!0),e.push({...t,details:i})})),n||(p(!0),x([{content:"Kindly fill atleast 25 alpha-numeric characters in job profile field in work experience",isButton:!0,isSubmitBtn:!0,btn_Text:"Okay",text_cls:"error_cls"}])),{valid:n,t_payload:e}}}})(e,s);n=t,o[e]=r}else s&&(o[e]=s)})),{isValid:n,payload:o}},re=()=>{let t="".concat(k,"_").concat(P)||"",n={};switch(t){case"resumeHeadline_resumeHeadline":case"professionalSummary_profileSummary":n=ne(t);break;case"workExDetails_jobDescription":case"projectsDetails_projectDescription":case"internshipDetails_internshipDescription":n=(t=>{let n=e.fieldData||{},r={[k]:[n]},o=!0;return(n[v.n[t]]||"").length||(e.requestSubmit&&e.requestSubmit(),o=!1),{isValid:o,payload:r}})(t)}return n},oe=()=>{var t;if(p(!1),x(!1),N(null),Q&&Q.current&&(Q.current=null),e.clearCommonError(),null!==e&&void 0!==e&&null!==(t=e.userDetail)&&void 0!==t&&t.isLoggedIn){if(0==z)window.isPaidResumeBuilder?e.displayGPTToastError("Attempts Exhausted"):e.setShowUnlockEditorResumePopup(!0);else if(K)e.displayGPTToastError("We are facing some technical issues. Please try after sometime.");else if(!e.disabledGPTGenerateBtn){let t=i.getCurrentContent().getPlainText()||"",n="";t&&(n=u()(Object(s.convertToRaw)(i.getCurrentContent())));let r=t.length?"RW_AI":"W_AI";Y.current="RW_AI"==r?"Rewrite with AI":"Write With AI";const{currentText:o,selectedText:c,startOffset:l,endOffset:d}=(()=>{const e=i.getSelection(),t=i.getCurrentContent(),n=e.getStartKey(),r=e.getStartOffset(),o=(e.getEndKey(),e.getEndOffset()),a=t.getBlockForKey(n).getText().slice(r,o);return{currentText:t.getPlainText(""),selectedText:a,startOffset:r,endOffset:o}})();let f={currentText:o,selectedText:c,startOffset:l,endOffset:d};J.current=f;let h=Object(a.s)().transId||Object(a.i)(H),p=(Object(a.s)().resumeId,"".concat(P));switch(["resumeHeadline","profileSummary"].includes(p)&&(p+="_".concat(te())),r){case"W_AI":let t=re();if(t.isValid){e.updateToggleHistory(k,P,F,B,F,n,G);let o={transId:h,section:P,templateParams:t.payload,templateName:v.o[p][r]||null};e.hasOwnProperty("setDisabledGPTGenerateBtn")&&e.setDisabledGPTGenerateBtn(!0),e.generateStreamingURL(o,ie)}else e.updateToggleHistory(k,P,F,B,F,n,G);break;case"RW_AI":let{isValid:i,minLength:a,errText:s}=((e,t)=>{let n=j.a.getState(),r=n.initialRMDetails&&n.initialRMDetails.inputValidations&&n.initialRMDetails.inputValidations.Rewrite||{},o=r[P]&&r[P].minLength||25,i=r[P]&&r[P].maxLength||2500,a="";return t.length&&t.length>=o&&t.length<=i||e.length>=o&&e.length<=i&&!t.length?{isValid:!0,minLength:o,errText:a}:(a=t.length&&t.length<o||e.length<o&&!t.length?"Kindly select or fill atleast ".concat(o," alpha-numeric characters "):"Kindly reduce the content within ".concat(i," characters"),{isValid:!1,minLength:o,errText:a})})(o,c);if(i){e.updateToggleHistory(k,P,F,B,F,n,G);let t={transId:h,section:P,templateParams:{text:c.length>0?c:o},templateName:v.o[p][r]||null};e.hasOwnProperty("setDisabledGPTGenerateBtn")&&e.setDisabledGPTGenerateBtn(!0),e.generateStreamingURL(t,ie)}else N({errCls:"error_txt",errText:s}),e.updateToggleHistory(k,P,F,B,F,n,G)}}}else e.appDispatch(Object(O.b)({value:!0,loginCallback:e.loginSuccessCallback,registerOnClick:e.openRegisterLayer}))},ie=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";t?(X.current=setInterval((()=>{r((t=>0==t?(window.sseConn&&E(),e.displayGPTToastError("Technical issue from AI"),$(Y.current,"Failure","Error From GPT"),clearInterval(X.current),5):t-1))}),1e3),_(t,ae)):($(Y.current,"Failure",n),e.setDisabledGPTGenerateBtn(!1))},ae=t=>{r(5);let{selectedText:n,currentText:o,startOffset:i,endOffset:a}=J.current||"";if("END_GPT_RESULT"===t){let t=n.length?o.substring(a):"";e.streamResponse(k,P,B,0,t,G),V.current=!1,X.current&&clearInterval(X.current),e.setDisabledGPTGenerateBtn&&e.setDisabledGPTGenerateBtn(!1),$(Y.current,"Success",""),E()}else{if(!V.current&&(e.increaseAttemptCounter({currentCounter:z>0?z-1:0,isTooltipSeen:q,showGenAIFeatures:e.showGenAIFeatures}),n.length>0)){t=o.substring(0,i)+" "+t}let r=0==V.current;V.current=!0,e.streamResponse(k,P,B,r,t,G)}};let se="".concat(k,"_").concat(P,"_").concat(B),ce=e.disabledGPTGenerateBtn||K?"disabled-cls":"not-disabled";return Object(h.jsxs)("div",{className:"editorContainer ".concat(se," ").concat(["profileSummary"].includes(P)?"profileSummaryEditorContainer":""),children:[Object(h.jsx)(l.Editor,{toolbarHidden:e.toolbarHidden||!1,editorStyle:e.editorStyle||{},editorState:i,stripPastedStyles:!0,wrapperClassName:"editorWrapper",toolbarClassName:"editorToolBar",editorClassName:"textEditor",onChange:t=>{let n="";i&&i.getCurrentContent().getPlainText()&&(n=u()(Object(s.convertToRaw)(i.getCurrentContent()))),e.onChange&&e.onChange(k,P,B,F,n),D(t.blocks[0].text.length)},toolbar:{options:["inline","list"],inline:{inDropdown:!1,className:void 0,component:void 0,dropdownClassName:void 0,options:["bold","italic","underline"]},list:{inDropdown:!1,options:["ordered","unordered"]}},onEditorStateChange:e=>{c(e)},handleBeforeInput:e=>{i.getCurrentContent().getPlainText().length;return i.getCurrentContent().getPlainText("").length-Z()>=R?"handled":"not-handled"},handlePastedText:e=>{const t=i.getCurrentContent().getPlainText("").length,n=Z();if(t+e.length-n>R){const t=i.getSelection().isCollapsed()?i:(()=>{const e=i.getSelection(),t=e.getStartKey(),n=e.getStartOffset(),r=e.getEndKey(),o=e.getEndOffset();if(t!==r||n!==o){const t=s.Modifier.removeRange(i.getCurrentContent(),e,"forward"),n=s.EditorState.push(i,t,"remove-range");return c(n),n}return i})();return((e,t)=>{const n=t.getCurrentContent().getPlainText().length;let r=R-n;const o=s.Modifier.insertText(t.getCurrentContent(),t.getSelection(),e.slice(0,r));c(s.EditorState.push(t,o,"insert-characters"))})(e,t),"handled"}return"not-handled"},keyBindingFn:function(e){if("Enter"==e.key){if(i.getCurrentContent().getPlainText("").length-Z()>=R)return"enter-block"}return Object(s.getDefaultKeyBinding)(e)},handleKeyCommand:function(e){return"enter-block"===e?"handled":"not-handled"},placeholder:e.placeholder}),Object(h.jsx)("div",{className:"premiumContainer",children:Object(h.jsxs)("div",{className:"generate-section ".concat(["profileSummary"].includes(P)?"profileSummaryGenerate":""),children:[W&&W.length>1&&Object(h.jsx)("div",{className:"history-navigation-arrow",children:(()=>{var e;let{leftArrow:t,rightArrow:n}=0==(r=F)?{leftArrow:y,rightArrow:m}:r==W.length-1?{leftArrow:g,rightArrow:b}:{leftArrow:g,rightArrow:m};var r;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("span",{className:"toggleArrow",onClick:()=>ee(F,F-1),children:Object(h.jsx)("img",{src:t})})," ",Object(h.jsxs)("span",{className:"currentHistory",children:[F?F+1:1,"/",null===(e=W)||void 0===e?void 0:e.length]}),Object(h.jsx)("span",{className:"toggleArrow",onClick:()=>ee(F,F+1),children:Object(h.jsx)("img",{src:n})})," "]})})()}),null!==(t=e.userDetail)&&void 0!==t&&t.isLoggedIn?Object(h.jsxs)("div",{className:"attempts-left",children:[z," attempts left ","  "]}):Object(h.jsx)("div",{className:"login-prompt",children:"Register/log in to write with AI"}),Object(h.jsxs)("div",{className:"generate-btn",children:[Object(h.jsxs)("span",{className:"generate-with-ai ".concat(ce),onMouseEnter:()=>{p(!0)},onMouseOut:()=>{},onClick:()=>oe(),children:[(()=>{var t;return 0===z&&null!==(t=e.userDetail)&&void 0!==t&&t.isLoggedIn?T.x.BUY_AI_ATTEMPTS:T.x.WRITE})()," "]})," ",Object(h.jsx)("img",{className:"ai-icon-align ".concat(e.disabledGPTGenerateBtn||K?"add-opacity":""),src:(e.disabledGPTGenerateBtn,S),alt:"generate-result"}),d&&Object(h.jsx)(C,{tooltipErr:w,sectionName:k,layerName:P,currentIdx:F,editorContent:i&&i.getCurrentContent()&&i.getCurrentContent().getPlainText()||"",setShowTooltip:p,isTooltipSeen:q,attempts:z,setTooltipSeen:e.setTooltipSeen,showGenAIFeatures:e.showGenAIFeatures})]})]})}),Object(h.jsxs)("div",{className:"inline-char-warning",children:[i&&Object(h.jsxs)("div",{className:"charsCount",children:[i.getCurrentContent().getPlainText().length,"/",R]}),I&&function(){let t="editorError"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"editorError")?I:e.commonWarning["".concat(k,"_").concat(P)];return Object(h.jsx)("p",{className:"".concat(t.errCls),children:t.errText})}()]})]})}var I=function(e){let t=e.sectionName||"",n=e.layerName||"";return e.genAIExperiment&&v.l.hasOwnProperty(t)&&v.l[t].includes(n)?Object(h.jsx)(x,{...e}):Object(h.jsx)(p,{...e})},N=n(104);const A=Object(a.j)(),D=(e,t)=>{let n=t||"Oops! Something went wrong!";e({type:N.o,payload:{type:"error",message:n}})},R=(e,t)=>{let n=w.a.GENERATE_GEN_AI_DATA_URL,r=j.a.getState();return o=>window.AJAX(n,{method:"POST",headers:{...A,accept:"application/json","Content-Type":"application/json",...Object(a.k)(r.userDetail.isLoggedIn)},data:JSON.stringify(e),withCredentials:!0}).then((e=>{if(e&&200==e.statusCode){const n=e&&e.data&&e.data.url;t&&t(n)}else{D(o,e.message||null);let n=e.message||"Failed to generate Streaming URL";t&&t(null,n)}}),(e=>{D(o);let n=e.message||"Unexpected Error!";t&&t(null,n)}))},k=e=>{let t=Object(a.s)().transId||Object(a.i)(j.a.getState()||{});return n=>{let r=w.a.DECREMENT_ATTEMPT_COUNTER_URL.replace("{actionType}","incrementStreamingCounter"),o=j.a.getState(),i={transId:t};return window.AJAX(r,{method:"POST",headers:{...A,accept:"application/json","Content-Type":"application/json",...Object(a.k)(o.userDetail.isLoggedIn)},data:JSON.stringify(i)}).then((t=>{t&&"0"==t.statusCode&&n({type:N.k,payload:e})}),(t=>{n({type:N.k,payload:e})}))}},P=(e,t)=>{let n=Object(a.s)().transId||Object(a.i)(j.a.getState()||{});return r=>{let o=w.a.DECREMENT_ATTEMPT_COUNTER_URL.replace("{actionType}","setToolTipSeen"),i=j.a.getState(),s={transId:n};if(window.isPaidResumeBuilder)return window.AJAX(o,{method:"POST",headers:{...A,accept:"application/json","Content-Type":"application/json",...Object(a.k)(i.userDetail.isLoggedIn)},data:JSON.stringify(s)}).then((n=>{t&&t(),r({type:N.k,payload:e})})),e=>{console.log(e)};r({type:N.k,payload:e})}},B=()=>e=>{e({type:N.l,payload:{}})},L=e=>t=>{t({type:N.o,payload:{type:"error",message:e}})};var M={generateStreamingURL:R,increaseAttemptCounter:k,setTooltipSeen:P,clearCommonError:B,displayGPTToastError:L},F=n(12);Object(a.j)();const G=Object(i.connect)((e=>({userDetail:e.userDetail,route:e.route,userAddDetails:e.userAddDetails,resumeData:e.resumeData,genAIExperiment:!0,commonWarning:e.commonWarning,attempts:e.attempCounter&&e.attempCounter.currentCounter||0,isTooltipSeen:e.attempCounter&&e.attempCounter.isTooltipSeen||!1,showGenAIFeatures:e.attempCounter&&e.attempCounter.showGenAIFeatures||!1})),((e,t)=>({...Object(F.b)(r,e)})))(I);t.default=G}}]);